<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Quét Serial Soundbox</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <style>
    body { font-family: Arial; padding: 16px }
    #reader { width: 100%; max-width: 400px }
  </style>
</head>
<body>

<h3>Quét serial</h3>

<div id="reader"></div>

<br>
<input id="serial" placeholder="Serial sẽ tự điền" readonly>
<br><br>
<button onclick="submitData()">Gửi</button>

<script>
const reader = new Html5Qrcode("reader");

reader.start(
  { facingMode: "environment" },   // camera sau
  {
    fps: 10,
    qrbox: 250
  },
  (text) => {
    document.getElementById("serial").value = text;
    reader.stop();
  }
);

function submitData() {
  const serial = document.getElementById("serial").value;
  if (!serial) {
    alert("Chưa có serial");
    return;
  }

  fetch("https://script.google.com/macros/library/d/1YD8S38iGxJDLRnwIdjpIq4L-sgj-C0ySmMYpz_iuJN_VNC0r6qeuQ4ud/1", {
    method: "POST",
    body: JSON.stringify({ serial })
  })
  .then(() => alert("Đã lưu"))
}
</script>

</body>
</html>
