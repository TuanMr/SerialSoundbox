<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Nh·∫≠p Serial Soundbox</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>

<body>
  <h3>Qu√©t Serial Soundbox</h3>

  <input id="serial" placeholder="Serial" readonly>
  <br><br>

  <button onclick="startScan()">üì∑ Qu√©t m√£ v·∫°ch</button>
  <br><br>

  <input id="name" placeholder="T√™n kh√°ch h√†ng">
  <br><br>

  <input id="phone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
  <br><br>

  <button onclick="submitForm()">G·ª≠i</button>

  <div id="reader" style="width:300px"></div>

<script>
let html5QrCode;

function startScan() {
  html5QrCode = new Html5Qrcode("reader");
  html5QrCode.start(
    { facingMode: "environment" },
    { fps: 10, qrbox: 250 },
    (decodedText) => {
      document.getElementById("serial").value = decodedText;
      html5QrCode.stop();
    }
  );
}

function submitForm() {
  fetch("https://script.google.com/macros/s/AKfycbweOqbcAceKzXhFa9cZ5YNR0GwnOBKvQpKryMx6X9f9K2ynkwePKXt_PikR8Hn4qhD00g/exec", {
    method: "POST",
    body: JSON.stringify({
      serial: document.getElementById("serial").value,
      name: document.getElementById("name").value,
      phone: document.getElementById("phone").value
    })
  })
  .then(r => r.json())
  .then(() => alert("ƒê√£ l∆∞u th√†nh c√¥ng"));
}
</script>
</body>
</html>
